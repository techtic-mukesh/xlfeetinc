{{ 'customer.css' | asset_url | stylesheet_tag }}
{{ 'show-password.js' | asset_url | script_tag }}
{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  .customer:not(.account):not(.order){
      margin-top:30px;
      margin-bottom:30px;
  }
  .customer{
    border-radius:20px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
    .customer:not(.account):not(.order){
      margin-top:50px;
      margin-bottom:30px;
    }
  }
  /* password toggle */
.field { position: relative; }
.password-field-wrapper { position: relative; }

.password-toggle-button{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  width:28px;
  height:28px;
  padding:0;
  border:0;
  background:transparent;
  cursor:pointer;
  display:grid;
  place-items:center;
  z-index:1;
}

.password-toggle-button .icon{ display:none; }
.password-toggle-button[aria-pressed="false"] .icon-show{ display:block; }
.password-toggle-button[aria-pressed="true"] .icon-hide{ display:block; }

.password-toggle-button:focus-visible{
  outline:2px solid currentColor;
  outline-offset:2px;
}

/* make room for the toggle inside the input */
.password-field-wrapper input[type="password"],
.password-field-wrapper input[type="text"]{
  padding-right:44px;
}
.password-toggle-button[aria-pressed="false"] .icon-show path , 
.password-toggle-button[aria-pressed="true"] .icon-hide path {
    stroke: rgba(var(--color-button),var(--alpha-button-background));
}
button.password-toggle-button {
    width: min-content;
    position: absolute;
    top: 50%;
    border: none;
    border-radius: 0;
    min-height: unset;
    background: unset;
    margin: 0;
    padding: 0;
    min-width: unset;
}
.field.password-field-wrapper button:after{
  box-shadow:unset;
}
.login-actions{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:20px 0 0;
}

.remember-me{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-size:14px;
  color: #5A5A5A;
  font-weight: 500;
  line-height:24px;
}

.remember-me input {
    appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid #5A5A5A;
    border-radius: 4px;
    display: inline-grid;
    place-items: center;
    margin: 0;
    
}

.remember-me input:checked{
  background:rgba(var(--color-button),var(--alpha-button-background));
  border-color:rgba(var(--color-button),var(--alpha-button-background));
}

.remember-me input:checked::after{
  content:'';
  width:8px;
  height:8px;
  background:#fff;
  clip-path:polygon(14% 54%,0 68%,38% 100%,100% 28%,86% 14%,38% 62%);
}

.forgot-link{
  font-size:12px;
  font-weight:600;
  color:currentColor;
  text-decoration:none;
}

.forgot-link:hover{ text-decoration:underline; }
{%- endstyle -%}

{%- if section.settings.enable_shop_login_button == false -%}
  {%- assign hide_shop_login_button = true -%}
{%- endif -%}
<div class="custom_login_page_width">
  <div class="customer login section-{{ section.id }}-padding color-{{ section.settings.color_scheme }}">
    <h1 id="recover" tabindex="-1">
      {{ 'customer.recover_password.title' | t }}
    </h1>
    <div>
      <p>
        {{ 'customer.recover_password.subtext' | t }}
      </p>

      {%- form 'recover_customer_password' -%}
        {% assign recover_success = form.posted_successfully? %}
         <span class="login_grid">
        <span class="login_grid_title">{{ 'customer.login_page.email' | t }}</span>
        <div class="field">
          <input
            type="email"
            value=""
            name="email"
            id="RecoverEmail"
            autocorrect="off"
            autocapitalize="off"
            autocomplete="email"
            {% if form.errors %}
              aria-invalid="true"
              aria-describedby="RecoverEmail-email-error"
              autofocus
            {% endif %}
            placeholder="{{ section.settings.email_placeholder }}"
          >
          <label for="RecoverEmail">
            {{ section.settings.email_placeholder }}
          </label>
        </div>
        </span>
        {%- if form.errors -%}
          <small id="RecoverEmail-email-error" class="form__message">
            <span class="svg-wrapper">
              {{- 'icon-error.svg' | inline_asset_content -}}
            </span>
            {{ form.errors.messages.form }}
          </small>
        {%- endif -%}

        <button>
          {{ 'customer.login_page.submit' | t }}
        </button>

        <a href="#login">
          {{ 'customer.login_page.cancel' | t }}
        </a>
      {%- endform -%}
    </div>

    <h1 id="login" tabindex="-1" class="test">
      {{ 'customer.login_page.title' | t }}
    </h1>
    <div class="login_meassge">If you have an account, sign in with your email address.</div>
    <div>
      {%- if recover_success == true -%}
        <h3 class="form__message" tabindex="-1" autofocus>
          <span class="svg-wrapper">
            {{- 'icon-success.svg' | inline_asset_content -}}
          </span>
          {{ 'customer.recover_password.success' | t }}
        </h3>
      {%- endif -%}
      {%- form 'customer_login', novalidate: 'novalidate' -%}
        {%- if form.errors -%}
          <h2 class="form__message" tabindex="-1" autofocus>
            <span class="visually-hidden">{{ 'accessibility.error' | t }} </span>
            <span class="svg-wrapper">
              {{- 'icon-error.svg' | inline_asset_content -}}
            </span>
            {{ 'templates.contact.form.error_heading' | t }}
          </h2>
          {{ form.errors | default_errors }}
        {%- endif -%}

        {%- if shop.features.login_with_shop_classic_customer_accounts? -%}
          <section name="sign-in-with-shop-provider">
            {{ shop | login_button: hide_button: hide_shop_login_button }}

            {%- unless hide_shop_login_button -%}
              <p>
                {{ 'customer.login_page.alternate_provider_separator' | t }}
              </p>
            {%- endunless -%}
          </section>
        {%- endif -%}
        <span class="login_grid">
        <span class="login_grid_title">{{ 'customer.login_page.email' | t }}</span>
        <div class="field">
          <input
            type="email"
            name="customer[email]"
            id="CustomerEmail"
            autocomplete="email"
            autocorrect="off"
            autocapitalize="off"
            {% if form.errors contains 'form' %}
              aria-invalid="true"
            {% endif %}
            placeholder="{{  section.settings.email_placeholder }}"
          >
          <label for="CustomerEmail">
            {{ section.settings.email_placeholder }}
          </label>
        </div>
        </span>
      
      <span class="login_grid ">
      
        {%- if form.password_needed -%}
        <span class="login_grid_title">{{ 'customer.login_page.password' | t }}</span>
          <div class="field">
            <input
              type="password"
              value=""
              name="customer[password]"
              id="CustomerPassword"
              autocomplete="current-password"
              {% if form.errors contains 'form' %}
                aria-invalid="true"
              {% endif %}
              placeholder="{{  section.settings.password_placeholder }}"
            >
            <label for="CustomerPassword">
              {{ section.settings.password_placeholder }}
            </label>
          </div>
      </span>
           <div class="login-actions">
            <label for="RememberMe" class="remember-me">
              <input type="checkbox" id="RememberMe">
              <span>Remember me</span>
            </label>
            <a href="#recover" class="forgot-link">
              {{ 'customer.login_page.forgot_password' | t }}
            </a>
          </div>
        {%- endif -%}
  
        <button>
          {{ 'customer.login_page.sign_in' | t }}
        </button>
        <span class="account_login">
          <span>Donâ€™t have an account yet?
          <a href="{{ routes.account_register_url }}">
            {{ 'customer.login_page.create_account' | t }}
          </a>
          </span>
        </span>
      {%- endform -%}
    </div>

    {%- if shop.checkout.guest_login -%}
      <div>
        <hr>
        <h2>{{ 'customer.login_page.guest_title' | t }}</h2>

        {%- form 'guest_login' -%}
          <button>
            {{ 'customer.login_page.guest_continue' | t }}
          </button>
        {%- endform -%}
      </div>
    {%- endif -%}
  </div>
</div>
{% schema %}
{
  "name": "t:sections.main-login.name",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_shop_login_button",
      "label": "t:sections.main-login.shop_login_button.enable",
      "default": true
    },
    {
      "type":"color_scheme",
      "id":"color_scheme",
      "label":"Color Scheme"
    },
    {
      "type":"header",
      "content":"Field Placeholder"
    },
    {
      "type":"text",
      "id":"email_placeholder",
      "label":"Email Placeholder",
      "default":"Type in your email address"
    },
    {
      "type":"text",
      "id":"password_placeholder",
      "label":"Password Placeholder",
      "default":"Your Password"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ]
}
{% endschema %}
