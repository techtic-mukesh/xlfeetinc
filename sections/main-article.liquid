{{ 'section-blog-post.css' | asset_url | stylesheet_tag }}

<style>
  .article-content-wrapper {
  overflow: hidden;
  position: relative;
  transition: max-height 480ms cubic-bezier(.4, 0, .2, 1);
  will-change: max-height;
  }
  .article-content-wrapper.is-expanded {
    max-height: none !important;
  }
.article-template__content.rte h3{
  color:{{ section.settings.content_block_subheading}};
} 
.blog-sidebar__title{
  color:{{ section.settings.recent_posts_heading_color}};
}
  .article-content__load-more {
    
    margin-top: 1.5rem;
  }
</style>

<article class="article-template">

  {%- comment -%} HERO / FEATURED IMAGE (full width) {%- endcomment -%}
  {%- for block in section.blocks -%}
    {%- case block.type -%}
      
    {%- endcase -%}
  {%- endfor -%}

  {%- comment -%} TWO-COLUMN LAYOUT: LEFT (article), RIGHT (sidebar) {%- endcomment -%}
  <div class="article-layout page-width color-{{ section.settings.color_scheme }} ">
    <div class="article-layout__main">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when '@app' -%}
            <div class="page-width--narrow" {{ block.shopify_attributes }}>
              {% render block %}
            </div>

          {%- when 'title' -%}
            <header
              class="article-template__header{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}"
              {{ block.shopify_attributes }}
            >
              <h1 class="article-template__title">
                {{ article.title | escape }}
              </h1>
            <div class="article_blog_title">  {{ blog.title | escape }}</div>
            {%- if block.settings.blog_show_date -%}
              <span class="circle-divider date_time_grid">
              <span class="date_time_svg"> 
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 0C12.4184 0 16 3.5816 16 8C16 12.4184 12.4184 16 8 16C3.5816 16 0 12.4184 0 8C0 3.5816 3.5816 0 8 0ZM8 1.116C6.17425 1.116 4.42328 1.84128 3.13228 3.13228C1.84128 4.42328 1.116 6.17425 1.116 8C1.116 9.82575 1.84128 11.5767 3.13228 12.8677C4.42328 14.1587 6.17425 14.884 8 14.884C9.82575 14.884 11.5767 14.1587 12.8677 12.8677C14.1587 11.5767 14.884 9.82575 14.884 8C14.884 6.17425 14.1587 4.42328 12.8677 3.13228C11.5767 1.84128 9.82575 1.116 8 1.116ZM7.256 4.4648C7.564 4.4648 7.8136 4.7152 7.8136 5.0232V8.9304H11.7208C11.8651 8.93587 12.0017 8.99705 12.1019 9.1011C12.2021 9.20514 12.2581 9.34396 12.2581 9.4884C12.2581 9.63284 12.2021 9.77166 12.1019 9.8757C12.0017 9.97975 11.8651 10.0409 11.7208 10.0464H7.256C7.10803 10.046 6.96625 9.98701 6.86162 9.88238C6.75699 9.77775 6.69802 9.63597 6.6976 9.488V5.024C6.6976 4.7152 6.9472 4.4648 7.256 4.4648Z" fill="black"/>
                </svg>
              </span>
              {{ article.published_at | time_tag: format: 'date' }}</span>
              {%- endif -%}
              
              {%- if block.settings.blog_show_author -%}
                <span class="caption-with-letter-spacing">
                  <span>{{ article.author }}</span>
                </span>
              {%- endif -%}
            </header>

          {%- when 'featured_image' -%}
        {%- if article.image -%}
          <div
            class="article-template__hero-container{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}"
            {{ block.shopify_attributes }}
          >
            <div
              class="article-template__hero-{{ block.settings.image_height }} media"
              {% if block.settings.image_height == 'adapt' and article.image %}
                style="padding-bottom: {{ 1 | divided_by: article.image.aspect_ratio | times: 100 }}%;"
              {% endif %}
            >
              <img
                srcset="
                  {% if article.image.width >= 350 %}{{ article.image | image_url: width: 350 }} 350w,{% endif %}
                  {% if article.image.width >= 750 %}{{ article.image | image_url: width: 750 }} 750w,{% endif %}
                  {% if article.image.width >= 1100 %}{{ article.image | image_url: width: 1100 }} 1100w,{% endif %}
                  {% if article.image.width >= 1500 %}{{ article.image | image_url: width: 1500 }} 1500w,{% endif %}
                  {% if article.image.width >= 2200 %}{{ article.image | image_url: width: 2200 }} 2200w,{% endif %}
                  {% if article.image.width >= 3000 %}{{ article.image | image_url: width: 3000 }} 3000w,{% endif %}
                  {{ article.image | image_url }} {{ article.image.width }}w
                "
                sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw"
                src="{{ article.image | image_url: width: 1100 }}"
                loading="eager"
                fetchpriority="high"
                width="{{ article.image.width }}"
                height="{{ article.image.height }}"
                alt="{{ article.image.alt | escape }}"
              >
            </div>
          </div>
        {%- endif -%}

          {%- when 'content' -%}
            <div
              class="article-template__content rte{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
              {{ block.shopify_attributes }}
            >
              <div id="ArticleContent-{{ section.id }}" class="article-content-wrapper">
                {{ article.content }}
              </div>
             
              <noscript></noscript>
            </div>

          {%- when 'share' -%}
            <div
              class="article-template__social-sharing{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
              {{ block.shopify_attributes }}
            >
              {% assign share_url = request.origin | append: article.url %}
              {% render 'share-button', block: block, share_link: share_url %}
            </div>
        {%- endcase -%}
      {%- endfor -%}

      {%- if section.settings.show_back_to_blog -%}
        <div class="article-template__back element-margin-top center{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
          <a href="{{ blog.url }}" class="article-template__link link animate-arrow">
            <span class="icon-wrap">
              <span class="svg-wrapper">
                {{- 'icon-arrow.svg' | inline_asset_content -}}
              </span>
            </span>
            {{ 'blogs.article.back_to_blog' | t: title: blog.title | escape }}
          </a>
        </div>
      {%- endif -%}

      
    </div>

    <aside class="article-layout__aside">
    <div class="artical_layout_aside_top">
      {%- if section.settings.show_sidebar_search -%}
        <div class="blog-sidebar__widget blog-sidebar__widget--search">
         
          <form action="{{ routes.search_url }}" method="get" role="search" class="blog-search" novalidate>
            <input type="hidden" name="type" value="article">
            <span class="blog-search__icon" aria-hidden="true">
              <span class="svg-wrapper">
                <svg class="icon icon-search" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g opacity="0.5">
                <path d="M15.2831 15.2544L19.25 19.25M17.4167 10.0833C17.4167 14.1334 14.1334 17.4167 10.0833 17.4167C6.03325 17.4167 2.75 14.1334 2.75 10.0833C2.75 6.03325 6.03325 2.75 10.0833 2.75C14.1334 2.75 17.4167 6.03325 17.4167 10.0833Z" stroke="#191B1D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </g>
                </svg>
              </span>
            </span>
            <input
              class="blog-search__input"
              type="search"
              name="q"
              value="{{ search.terms | escape }}"
              placeholder="{{ section.settings.search_placeholder | default: 'Search posts here' }}"
            >
            <button class="blog-search__submit visually-hidden" type="submit">
              {{ section.settings.search_button_label | default: 'Search' }}
            </button>
          </form>
        </div>
      {%- endif -%}

      {%- if section.settings.show_sidebar_recent_posts -%}
        <div class="blog-sidebar__widget blog-sidebar__widget--recent">
          <h3 class="blog-sidebar__title">{{ section.settings.recent_posts_heading | default: 'Recent posts' }}</h3>
          <ul class="blog-sidebar__list">
            {%- for a in blog.articles limit: section.settings.recent_posts_count -%}
              <li class="blog-sidebar__item{% if forloop.last %} blog-sidebar__item--last{% endif %}">
                <a class="blog-sidebar__link" href="{{ a.url }}">
                  <span class="blog-sidebar__thumb">
                    {% if a.image %}
                      <img
                        srcset="
                          {{ a.image | image_url: width: 64, height: 64, crop: 'center' }} 1x,
                          {{ a.image | image_url: width: 128, height: 128, crop: 'center' }} 2x
                        "
                        src="{{ a.image | image_url: width: 96, height: 96, crop: 'center' }}"
                        width="64"
                        height="64"
                        loading="lazy"
                        alt="{{ a.image.alt | default: a.title | escape }}"
                      >
                    {% else %}
                      {{ 'image' | placeholder_svg_tag: 'blog-sidebar__placeholder' }}
                    {% endif %}
                  </span>
                  <span class="blog-sidebar__text">
                    <span class="blog-sidebar__title">{{ a.title | escape }}</span>
                    <span class="blog-sidebar__meta">Read More</span>
                  </span>
                </a>
              </li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
    </div>
      {%- if section.settings.show_sidebar_tags and blog.all_tags.size > 0 -%}
        <div class="blog-sidebar__widget blog-sidebar__widget--tags">
          <h3 class="blog-sidebar__title">{{ section.settings.tags_heading | default: 'Tags' }}</h3>
          <div class="blog-sidebar__tags">
            {%- for tag in blog.all_tags -%}
              <a class="blog-sidebar__tag" href="{{ blog.url }}/tagged/{{ tag | handle }}">{{ tag }}</a>
            {%- endfor -%}
          </div>
        </div>
      {%- endif -%}
    </aside>
    
  </div>
  {%- if blog.comments_enabled? -%}
    <div class="page-width">
      {%- comment -%} NEXT/PREVIOUS BLOG POST NAVIGATION {%- endcomment -%}
          {%- if section.settings.show_next_prev_posts -%}
            <nav class="blog-post-navigation{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
              {%- if blog.previous_article -%}
                <div class="blog-post-navigation__item blog-post-navigation__item--prev">
                  <a href="{{ blog.previous_article.url }}" class="blog-post-navigation__link">
                    <span class="blog-post-navigation__label">Previous</span>
                    <span class="blog-post-navigation__title">{{ blog.previous_article.title | escape }}</span>
                  </a>
                </div>
              {%- else -%}
                <div class="blog-post-navigation__item"></div>
              {%- endif -%}

              {%- if blog.next_article -%}
                <div class="blog-post-navigation__item blog-post-navigation__item--next">
                  <a href="{{ blog.next_article.url }}" class="blog-post-navigation__link">
                    <span class="blog-post-navigation__label">Next </span>
                    <span class="blog-post-navigation__title">{{ blog.next_article.title | escape }}</span>
                  </a>
                </div>
              {%- else -%}
                <div class="blog-post-navigation__item"></div>
              {%- endif -%}
            </nav>
          {%- endif -%}
          <div class="article-template__comment-wrapper background-secondary">
            <div
              id="comments"
              class="{% if settings.animations_reveal_on_scroll %}scroll-trigger animate--slide-in{% endif %}"
            >
              {%- if article.comments_count > 0 -%}
                {%- assign anchorId = '#Comments-' | append: article.id -%}

                <h2 id="Comments-{{ article.id }}" tabindex="-1">
                  {{ 'blogs.article.comments' | t: count: article.comments_count }}
                </h2>
                {% paginate article.comments by 5 %}
                  <div class="article-template__comments">
                    {%- if comment.status == 'pending' and comment.content -%}
                      <article id="{{ comment.id }}" class="article-template__comments-comment">
                        {{ comment.content }}
                        <footer class="right">
                          <span class="circle-divider caption-with-letter-spacing">{{ comment.author }}</span>
                        </footer>
                      </article>
                    {%- endif -%}

                    {%- for comment in article.comments -%}
                      <article id="{{ comment.id }}" class="article-template__comments-comment">
                        {{ comment.content }}
                        <footer class="right">
                          <span class="circle-divider caption-with-letter-spacing">{{ comment.author }}</span
                          ><span class="caption-with-letter-spacing">
                            {{- comment.created_at | time_tag: format: 'date' -}}
                          </span>
                        </footer>
                      </article>
                    {%- endfor -%}
                    {% render 'pagination', paginate: paginate, anchor: anchorId %}
                  </div>
                {% endpaginate %}
              {%- endif -%}
              {% form 'new_comment', article %}
                {%- liquid
                  assign post_message = 'blogs.article.success'
                  if blog.moderated? and comment.status == 'unapproved'
                    assign post_message = 'blogs.article.success_moderated'
                  endif
                -%}
                <h3> <span>{{ 'blogs.article.comment_form_title' | t }}</span></h3>
                {%- if form.errors -%}
                  <div class="form__message" role="alert">
                    <h3 class="form-status caption-large text-body" tabindex="-1" autofocus>
                      <span class="svg-wrapper">
                        {{- 'icon-error.svg' | inline_asset_content -}}
                      </span>
                      {{ 'templates.contact.form.error_heading' | t }}
                    </h3>
                  </div>
                  <ul class="form-status-list caption-large">
                    {%- for field in form.errors -%}
                      <li>
                        <a href="#CommentForm-{{ field }}" class="link">
                          {%- if form.errors.translated_fields[field] contains 'author' -%}
                            {{ 'blogs.article.name' | t }}
                          {%- elsif form.errors.translated_fields[field] contains 'body' -%}
                            {{ 'blogs.article.message' | t }}
                          {%- else -%}
                            {{ form.errors.translated_fields[field] }}
                          {%- endif -%}
                          {{ form.errors.messages[field] }}
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- elsif form.posted_successfully? -%}
                  <div class="form-status-list form__message" role="status">
                    <h3 class="form-status" tabindex="-1" autofocus>
                      <span class="svg-wrapper">
                        {{- 'icon-success.svg' | inline_asset_content -}}
                      </span>
                      {{ post_message | t }}
                    </h3>
                  </div>
                {%- endif -%}

                <div
                  {% if blog.moderated? == false %}
                    class="article-template__comments-fields"
                  {% endif %}
                >
                  <div class="article-template__comment-fields">
                    <div class="field field--with-error">
                      <input
                        type="text"
                        name="comment[author]"
                        id="CommentForm-author"
                        class="field__input"
                        autocomplete="name"
                        value="{{ form.author }}"
                        aria-required="true"
                        required
                        {% if form.errors contains 'author' %}
                          aria-invalid="true"
                          aria-describedby="CommentForm-author-error"
                        {% endif %}
                        placeholder="{{ 'blogs.article.name' | t }}"
                      >
                      <label class="field__label" for="CommentForm-author">
                        {{- 'blogs.article.name' | t }}
                        <span aria-hidden="true">*</span></label
                      >
                      {%- if form.errors contains 'author' -%}
                        <small id="CommentForm-author-error">
                          <span class="form__message">
                            <span class="svg-wrapper">
                              {{- 'icon-error.svg' | inline_asset_content -}}
                            </span>
                            {{- 'blogs.article.name' | t }}
                            {{ form.errors.messages.author }}.</span
                          >
                        </small>
                      {%- endif -%}
                    </div>
                    <div class="field field--with-error">
                      <input
                        type="email"
                        name="comment[email]"
                        id="CommentForm-email"
                        autocomplete="email"
                        class="field__input"
                        value="{{ form.email }}"
                        autocorrect="off"
                        autocapitalize="off"
                        aria-required="true"
                        required
                        {% if form.errors contains 'email' %}
                          aria-invalid="true"
                          aria-describedby="CommentForm-email-error"
                        {% endif %}
                        placeholder="{{ 'blogs.article.email' | t }}"
                      >
                      <label class="field__label" for="CommentForm-email">
                        {{- 'blogs.article.email' | t }}
                        <span aria-hidden="true">*</span></label
                      >
                      {%- if form.errors contains 'email' -%}
                        <small id="CommentForm-email-error">
                          <span class="form__message">
                            <span class="svg-wrapper">
                              {{- 'icon-error.svg' | inline_asset_content -}}
                            </span>
                            {{- 'blogs.article.email' | t }}
                            {{ form.errors.messages.email }}.</span
                          >
                        </small>
                      {%- endif -%}
                    </div>
                  </div>
                  <div class="field field--with-error">
                    <textarea
                      rows="5"
                      name="comment[body]"
                      id="CommentForm-body"
                      class="text-area field__input"
                      aria-required="true"
                      required
                      {% if form.errors contains 'body' %}
                        aria-invalid="true"
                        aria-describedby="CommentForm-body-error"
                      {% endif %}
                      placeholder="{{ 'blogs.article.message' | t }}"
                    >{{ form.body }}</textarea>
                    <label class="form__label field__label" for="CommentForm-body">
                      {{- 'blogs.article.message' | t }}
                      <span aria-hidden="true">*</span></label
                    >
                  </div>
                  {%- if form.errors contains 'body' -%}
                    <small id="CommentForm-body-error">
                      <span class="form__message">
                        <span class="svg-wrapper">
                          {{- 'icon-error.svg' | inline_asset_content -}}
                        </span>
                        {{- 'blogs.article.message' | t }}
                        {{ form.errors.messages.body }}.</span
                      >
                    </small>
                  {%- endif -%}
                </div>
                {%- if blog.moderated? -%}
                  <p class="article-template__comment-warning caption">{{ 'blogs.article.moderated' | t }}</p>
                {%- endif -%}
                <input type="submit" class="button" value="{{ 'blogs.article.post' | t }}">
              {% endform %}
            </div>
          </div>
    </div>
  {%- endif -%}
</article>


<script>
  (function() {
    function updateArticleStickyTop() {
      // Detect your store header (supports Dawn variants); adjust selectors if needed
      var header =
        document.querySelector('.shopify-section-header') ||
        document.querySelector('header[role="banner"]') ||
        document.querySelector('.header-wrapper');

      var offset = header ? Math.ceil(header.getBoundingClientRect().height) : 0;

      // If you truly want to stick at absolute viewport top, force: offset = 0;
      document.documentElement.style.setProperty('--article-sticky-top', offset + 'px');
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', updateArticleStickyTop);
    } else {
      updateArticleStickyTop();
    }
    window.addEventListener('resize', updateArticleStickyTop);
  })();
</script>
<script type="application/ld+json">
  {{ article | structured_data }}
</script>

{% schema %}
{
  "name": "t:sections.main-article.name",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type":"color",
      "id":"content_block_subheading",
      "label":"Content Block Subheading"
    },
    {
      "type": "checkbox",
      "id": "show_back_to_blog",
      "label": "Show back-to-blog link",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_next_prev_posts",
      "label": "Show next/previous posts navigation",
      "default": true
    },
    {
      "type": "header",
      "content": "Sidebar"
    },
    {
      "type": "checkbox",
      "id": "show_sidebar_search",
      "label": "Show search",
      "default": true
    },
    {
      "type": "text",
      "id": "search_heading",
      "label": "Search heading",
      "default": "Search"
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "Search placeholder",
      "default": "Search articles"
    },
    {
      "type": "text",
      "id": "search_button_label",
      "label": "Search button label",
      "default": "Search"
    },
    {
      "type": "checkbox",
      "id": "show_sidebar_recent_posts",
      "label": "Show recent posts",
      "default": true
    },
    {
      "type": "text",
      "id": "recent_posts_heading",
      "label": "Recent posts heading",
      "default": "Recent posts"
    },
    {
      "type":"color",
      "id":"recent_posts_heading_color",
      "label":"Recent Post / Tag  Heading Color"
    },
    {
      "type": "range",
      "id": "recent_posts_count",
      "label": "Number of recent posts",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 5
    },
    {
      "type": "checkbox",
      "id": "show_sidebar_tags",
      "label": "Show tags",
      "default": true
    },
    {
      "type": "text",
      "id": "tags_heading",
      "label": "Tags heading",
      "default": "Tags"
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "featured_image",
      "name": "t:sections.main-article.blocks.featured_image.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "image_height",
          "options": [
            { "value": "adapt", "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__1.label" },
            { "value": "small", "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__2.label" },
            { "value": "medium", "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__3.label" },
            { "value": "large", "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__4.label" }
          ],
          "default": "adapt",
          "label": "t:sections.main-article.blocks.featured_image.settings.image_height.label"
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.main-article.blocks.title.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "blog_show_date",
          "default": true,
          "label": "t:sections.main-article.blocks.title.settings.blog_show_date.label"
        },
        {
          "type": "checkbox",
          "id": "blog_show_author",
          "default": false,
          "label": "t:sections.main-article.blocks.title.settings.blog_show_author.label"
        }
      ]
    },
    {
      "type": "content",
      "name": "t:sections.main-article.blocks.content.name",
      "limit": 1
    },
    {
      "type": "share",
      "name": "t:sections.main-article.blocks.share.name",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "t:sections.main-article.blocks.share.settings.text.label",
          "default": "t:sections.main-article.blocks.share.settings.text.default"
        }
      ]
    }
  ]
}
{% endschema %}